# 구글·네이버 API키를 이용한 노션 뉴스클리핑의 교훈

## 1. 과제 배경
- 다양한 분야(방위산업, 신재생에너지, 보험중개)의 뉴스를 네이버/구글 API로 수집하여 노션 데이터베이스에 자동 업로드하는 시스템을 구축하고자 함.
- 반복적 수작업을 자동화하여 정보 활용성과 업무 효율을 극대화하는 것이 목표.

## 2. 경과 및 계획
- 1단계: 노션 DB 구조 설계 및 샘플 데이터 입력 완료
- 2단계: 네이버/구글 API키 발급 및 유효성 검증
- 3단계: API 연동 자동화 스크립트 개발
- 4단계: 실제 뉴스 데이터 수집 및 노션 DB 자동 업로드 성공

## 3. 실행 과정
- 네이버/구글 API키 발급 및 환경설정
- API키 유효성 검증(아래 코드 참고)
- 뉴스 데이터 수집(키워드별 3건씩)
- 노션 API 연동 및 DB 업로드 자동화

## 4. 문제점 및 해결 방향
- **가장 큰 문제:** 구글/네이버 API키 연동에서 5시간 이상 소요
    - 키 유효성 검증, API 호출 파라미터, 권한 설정 등에서 반복적으로 오류 발생
- **해결 방법:**
    - 키 유효성 검증 코드를 별도로 작성하여, 키 문제를 신속히 진단
    - 노션 DB와 인테그레이션 권한(공유) 문제를 체크리스트화
    - API 호출 예제와 파라미터를 공식 문서와 대조하며 점검

## 5. 교훈 및 향후 대비
- **API 연동의 핵심은 키 유효성 검증과 권한 설정**임을 명확히 인식
- 연동 오류 발생 시, 아래와 같은 최소 검증 코드를 먼저 실행하여 원인을 신속히 파악할 것
- 노션 DB 연동 시, 인테그레이션 권한(공유) 설정을 반드시 확인할 것
- 향후 다양한 외부 API 연동 시에도, 유효성 검증 → 권한 확인 → 실제 연동 순으로 접근할 것

---

## 6. 구글/네이버 API키 유효성 검증 코드 (향후 활용용)

### 구글 Custom Search API 키 유효성 검증
```python
import requests
print("유효" if requests.get("https://www.googleapis.com/customsearch/v1", params={"key":"[여기에_구글_API키]","cx":"test","q":"test"}).status_code==200 else "무효")
```

### 네이버 오픈 API 키 유효성 검증
```python
import requests
headers = {
    "X-Naver-Client-Id": "[여기에_네이버_Client_ID]",
    "X-Naver-Client-Secret": "[여기에_네이버_Client_Secret]"
}
print("유효" if requests.get("https://openapi.naver.com/v1/search/blog", params={"query": "테스트"}, headers=headers).status_code == 200 else "무효")
```

---

## 7. 결론
- API 연동 자동화의 첫걸음은 키 유효성 검증과 권한 설정이다.
- 문제 발생 시, 단순화된 검증 코드로 원인을 빠르게 진단할 것.
- 이번 경험을 바탕으로, 향후 다양한 정보 자동화 프로젝트에 신속하게 대응할 수 있을 것이다. 